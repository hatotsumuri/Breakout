# Copilot Instructions for Breakout

このリポジトリで GitHub Copilot / AI アシスタントが作業する際のルールとコンテキストです。

## プロジェクト概要

- ブラウザ上で動作するシンプルなブロック崩しゲームです。
- エントリポイントは `index.html` 1 ファイルのみで、外部ライブラリには依存していません。
- ゲームは Canvas 2D API と `requestAnimationFrame` を用いて実装されています。
- 主な構成要素:
  - ゲームループ: `loop(t)` 関数（`requestAnimationFrame` ベース）
  - 状態更新: `update(dt)` 関数とその周辺ロジック
  - 描画: `draw()` 関数
  - 入力: キーボード（← → / Space / B）、マウス、タッチ

## 開発ポリシー（必ず守るルール）

このリポジトリで AI がコード変更を行う場合は、**必ず次の順番で作業してください**:

1. **まずプラン（設計・方針）を提案する**
2. **ユーザーからの承認をもらう**
3. **承認されたプランに沿って実装する**

### 1. プラン提案のルール

- いきなりコードの差分や `apply_patch` を出さないこと。
- まずテキストで「何をどう変えるか」のプランを簡潔にまとめて提示する。
- プランには最低限、次の 4 点を含めること:
  1. **目的・背景**: なぜその変更が必要なのか
  2. **変更内容の概要**: どのような挙動にしたいのか（ゲームルールや UI の変更点など）
  3. **影響範囲**: どの関数・どのファイル・どのゲーム要素に影響するか
  4. **実装方針**: どの変数や関数をどう変更／追加するかの大まかなステップ

- 仕様があいまいな場合は、推測で進めず、前提を明示したうえでユーザーに確認を求めること。

### 2. 承認を待つ

- プランを提示したら、**ユーザーからの「OK」「承認」「これでお願いします」などの明確な同意があるまで実装に進まないこと**。
- 承認前にコードを書き始めない。

### 3. 実装時の方針

- 変更は原則として `index.html` 内に完結させる（このリポジトリはシングルファイル構成のため）。
- 既存のスタイル・命名・構造を尊重し、必要以上に大規模なリファクタリングを行わない。
- 1 回の変更は、ユーザーが理解しやすい「まとまり」に分割する（例: ルール変更 1 件、UI 文言変更 1 件など）。
- 実装後は、可能な範囲で挙動を説明し、どこをどう変えたかを簡潔にまとめる。

### 小さな変更について

- スペルミス修正、コメント修正、README の文言改善など、挙動に影響しない小さな変更であっても、
  - 「どこをどう変えるつもりか」を 1〜2 行でプランとして先に書いてから実装してください。
- ユーザーが「この種の変更はプラン不要」と明示的に指示した場合のみ、その範囲に限ってプラン省略を認めます。

## AI が依拠すべき情報源

- **`README.md`**: プロジェクトの概要・遊び方・全体像を理解するために必ず参照してください。
- **`copilot-instructions.md`（このファイル）**: ここに書かれたルールは、このリポジトリで作業する AI の行動規範です。常に尊重してください。

## 望まれるふるまいの例

- ユーザーが「ボールが 100 個落ちたらゲームオーバーにして」と依頼した場合:
  1. まず「落ちた弾のカウント用変数を追加し、メインボールと追加弾の両方をカウントする」といったプランを箇条書きで提示する。
  2. ユーザーの承認後、そのプランに沿って `index.html` を編集する。
  3. 実装後に「どの変数を追加し、どの条件でゲームオーバーになるようにしたか」を簡潔に説明する。

- ユーザーが曖昧な要望をした場合:
  - たとえば「もっと難しくして」といった依頼には、
    - ブロック数を増やす
    - ボール速度の上昇率を上げる
    - パドル幅を狭くする
    など複数案をプランとして提案し、どの方向性を採用するか確認を取ってから実装する。

## 避けるべきこと

- プランなしでの直接のコード編集・大きなリファクタリング
- ユーザーの意図を確認せずに仕様を大きく変えること
- 不必要に依存関係やファイルを増やし、このシンプルな構成を複雑にすること

以上の方針に従って、GitHub Copilot / AI アシスタントはこのリポジトリでの作業を行ってください。